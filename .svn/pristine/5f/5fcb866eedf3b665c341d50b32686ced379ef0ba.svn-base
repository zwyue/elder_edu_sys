    //左侧导航
		layui.use('element', function () {
   			 var element = layui.element;
		});

		$(function () {
    		DatatoLoad();
        });

        function DatatoLoad() {
            //分页
            var pageNum = 0;    //初始化页数为第一页
            var pageSize = 7;   //列表数量为7条
            layui.use('laypage', function () {
                var laypage = layui.laypage;
                var totalSize = 0; //初始化数据总数
                getDatasSize();

                function getDatasSize() {
                    $.ajax({
                        type: 'get',
                        async: false,
                        url: "http://192.168.0.166:8080/classroom/typelist",
                        data: {
                            page: pageNum,
                            size: pageSize
                        },
                        dataType: "json",
                        xhrFields: {withCredentials: true},
                        success: function (data) {
                            totalSize = data.data.total; //获得数据总条数
                            var html = '';
                            var len = data.data.list.length;
                            for (var i = 1; i < len + 1; i++) {
                                $('table tr:eq(' + i + ')td:first').text(i);
                            }
                            $.each(data.data.list, function (i, result) {
                                html += "<tr>";
                                html += "<td>" + (i + 1) + "</td>" + "<td>" + result.catename + "</td>" +
                                    "<td><a href='JavaScript:;' onclick='delect(" + result.id + ")' class='bg bgActive del'>删除</a>" +
                                    "<a href='jslb_jslbglxg.html?id=" + result.id + "' class='bg change'>修改</a></td>";
                                html += "</tr>";
                            })
                            $("#yhTableList").html(html);
                        },
                        error: function () {
                            console.log("error");
                        },
                    })
                }

                //执行一个laypage
                laypage.render({
                    elem: 'demo5',    //分页容器，此处是id
                    count: totalSize, //数据总数，从服务端得到
                    curr: pageNum,
                    limit: pageSize,
                    jump: function (obj, first) {
                        pageNum = obj.curr;     //得到当前页，以便向服务端请求对应页的数据。
                        pageSize = obj.limit;   //得到每页显示的条数

                        //首次不执行
                        if (!first) {
                            $("#yhTableList").empty();
                            getDatasSize();
                        }
                    }
                })
            })
        }

    	//删除
        function delect(id) {
            $.ajax({
                type: 'get',
                url: "http://192.168.0.166:8080/classroom/deletetype",
                async: false,
                data: {
                    id: id
                },
                dataType: "json",
                xhrFields: {withCredentials: true},
                success: function (data) {
                    if (data.code == 1) {
                        layui.use('layer', function () {
                            layer.confirm('确认要删除吗？', function (index) {
                                //发异步删除数据
                                layer.msg('已删除!', {
                                    icon: 1,
                                    time: 1000
                                });
                                DatatoLoad();
                            });
                        });
                    } else {
                        layui.use('layer', function () {
                            var layer = layui.layer;
                            layer.msg('删除失败！');
                        });
                    }
                },
                error: function () {
                    layui.use('layer', function () {
                        var layer = layui.layer;
                        layer.msg('删除失败！');
                    });
                }
            })
        }

    	//查询
    	function chaxun() {
            //验证查询文本框
            var nameType = $('#name').val();
            if (nameType == '') {
                layui.use('layer', function () {
                    var layer = layui.layer;
                    layer.alert('请输入类别名称', {area: ['200px']});
                });
                return false;
            }
            else {
                //分页
                var pageNum = 0;    //初始化页数为第一页
                var pageSize = 7;   //列表数量为7条
                layui.use('laypage', function () {
                    var laypage = layui.laypage;
                    var totalSize = 0; //初始化数据总数
                    getQuery();

                    function getQuery() {
                        $.ajax({
                            type: 'GET',
                            url: "http://192.168.0.166:8080/classroom/getCate",
                            async: false,
                            data: {
                                catename: nameType,
                                page: pageNum,
                                size: pageSize
                            },
                            dataType: "json",
                            xhrFields: {withCredentials: true},
                            success: function (data) {
                                if (data.data.list.length == 0) {
                                    layui.use('layer', function () {
                                        var layer = layui.layer;
                                        layer.alert('未查到相关信息', {area: ['200px']});
                                    });
                                    $("#yhTableList").html('');
                                    return false;
                                }
                                else {
                                    totalSize = data.data.total;
                                    var chaXun;
                                    var len = data.data.list.length;
                                    for (var i = 1; i < len + 1; i++) {
                                        $('table tr:eq(' + i + ')td:first').text(i);
                                    }
                                    $.each(data.data.list, function (i, result) {
                                        chaXun += "<tr>";
                                        chaXun += "<td>" + (i + 1) + "</td>" + "<td>" + result.catename + "</td>" +
                                            "<td><a href='JavaScript:;' onclick='delect(" + result.id + ")' class='bg bgActive del'>删除</a>" +
                                            "<a href='jslb_jslbglxg.html?id=" + result.id + "' class='bg change'>修改</a></td>";
                                        chaXun += "</tr>";
                                    })
                                    $("#yhTableList").html(chaXun);
                                }
                            },
                            error: function () {
                                layui.use('layer', function () {
                                    var layer = layui.layer;
                                    layer.msg('查询失败！');
                                });
                            }
                        })

                    }

                    //执行一个laypage
                    laypage.render({
                        elem: 'demo5',    //分页容器，此处是id
                        count: totalSize, //数据总数，从服务端得到
                        curr: pageNum,
                        limit: pageSize,
                        jump: function (obj, first) {
                            pageNum = obj.curr;     //得到当前页，以便向服务端请求对应页的数据。
                            pageSize = obj.limit;   //得到每页显示的条数

                            //首次不执行
                            if (!first) {
                                $("#yhTableList").empty();
                                getQuery();
                            }
                        }
                    })
                })
            }
        }