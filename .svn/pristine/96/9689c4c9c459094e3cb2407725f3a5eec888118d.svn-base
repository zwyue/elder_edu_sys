<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>老年大学系统—学生报名</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="plugins/layui-v2.4.3/layui/css/layui.css" />
    <link rel="stylesheet" href="css/common_style.css" />
    <link rel="stylesheet" href="css/bmgl_xzbj_xsxx.css" />
    <style>
        /*弹窗样式*/
        body .layui-layer-title{
            background-color: #3d9def;
            border-radius: 0.3rem;
            color: #FFFFFF;
            font-size: 18px;
        }
        body .layui-layer{
            border-radius: 0.5rem;
        }
        body .tc_btn button{
            border-radius: 0.3rem;
        }
        .layui-table th{
            text-align: center;
        }
        .layui-layer-close{
            position: unset!important;
        }
        .layui-form-label{
            color: #666666;
        }
        
    </style>
</head>
<body>
   
    <!-- 内容主体区域 -->
    <div class="layui-body body_contain">
        <blockquote class="body_header">
              <span class="">
                <a href="javascript:;" class="txt_xsl2">学生报名</a>&nbsp;<span lay-separator="">></span>
                <a href="javascript:;" class="txt_xsl3">学生信息</a>
              </span>
              <span class="fanHui">
				<a href="javascript:;">返回</a>
			  </span>
        </blockquote>
        <section class="bg">
            <section class="contain-bg">
                <div class="contain_text">
                    <div class="contain-left">
                        <span class="bmbj_bj">学生报名</span>
                    </div>
                    <div class="contain-right">
                        <button type="button" id="btn" class="ydbtn" onclick="ydbutton()" name="btn"><i
                                class="iconfont icon-daochu"></i>异动档案
                        </button>
                    </div>
                </div>
                <div class="getInfo">
                    <span class="getInfoBtn" onclick="new Device().startFun()">读取身份证信息</span>
                </div>
            </section>
            <div>
                <form class="layui-form z-from" action="">
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">学生姓名:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="通过刷身份证获取，禁用"
                                       autocomplete="off" class="layui-input" id="personName">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">身份证号：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="通过刷身份证获取，禁用"
                                       autocomplete="off" class="layui-input" id="idCard">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">联系方式：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required"
                                       placeholder="老师数据回填，并禁用，新生，手填" autocomplete="off" class="layui-input" id="phone">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">家庭地址：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="老师数据回填，并禁用"
                                       autocomplete="off" class="layui-input" id="address">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">学生证：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required"
                                       placeholder="老师数据回填，并禁用，下拉框，拥有和" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">性别:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="通过刷身份证获取，禁用"
                                       autocomplete="off" class="layui-input" id="gender">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">民族:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="通过刷身份证获取，禁用"
                                       autocomplete="off" class="layui-input" id="nation">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">家庭联系:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="老师数据回填，并禁用"
                                       autocomplete="off" class="layui-input" id="emergency">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">报名费用:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="必填项"
                                       autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">汽车牌号:</label>
                            <div class="layui-input-inline">
                                <input type="text" name="title" required lay-verify="required" placeholder="老师数据回填，并禁用"
                                       autocomplete="off" class="layui-input" id="carNumber">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </section>
        <div class="btn">
            <input type="button" value="报名" id="enroll">
        </div>
    </div>
    <!-- 内容主体区域end -->
    <!--弹出层内容-->
    <div id="popSearchRoleTest" style="display:none;">
        <div style="width: 80%; text-align:center;  margin:0 auto; padding-top:5%;">
            <form class="layui-form">
                <div class="table_style">
                    <table class="layui-table">
                        <colgroup>
                            <!--<col width="150">-->
                            <!--<col width="200">-->
                            <!--<col >-->
                        </colgroup>
                        <thead>
                        <tr>
                            <th>序号</th>
                            <th>异动类型</th>
                            <th>异动时间</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>退学</td>
                            <td>2018-11-11</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>退学</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>休学</td>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="layui-form-item">
                    <div class="tc_btn">
                        <button type="button" class="layui-layer-close layui-btn layui-btn-normal">关闭</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!--弹出层内容end-->
<!--<div class="layui-footer">-->

<!--</div>-->
   <script src="./plugins/jQuery/jquery-3.3.1.min.js"></script>
   <script src="./plugins/layui-v2.4.3/layui/layui.js"></script>
   <script src="js/common.js"></script>
   <!--身份证读取-->
	<script type="text/javascript" src="js/baseISSObject.js"></script>
	<script type="text/javascript" src="js/baseISSOnline.js"></script>
	<script type="text/javascript" src="js/commonId.js"></script>		
	<!--身份证读取end-->
   <script src="./js/bmgl_tc.js"></script>
	<script>
		layui.use(['layer', 'form'], function(){
            var form = layui.form;    
		//保存新增学生
		$('#enroll').click(function(){
			var stuname    = $('#personName').val();  //学生姓名
			var sex        = $('#gender').val();      //性别
			var sfzh       = $('#idCard').val();      //身份证号
			var nation     = $('#nation').val();      //民族
			var address    = $('#address').val();     //家庭住址
			var phone      = $('#phone').val();       //联系方式
			var carnumber   = $('#carNumber').val();    //汽车车牌号
			var emergency  = $('#emergency').val();	  //家庭联系方式
			var classCategoryId =  $('#classCategory option:selected').val();  //班级类别ID
			var classCategory =  $('#classCategory option:selected').text();   //班级类别名称
			var classMajorId = $('#classMajor option:selected').val();         //班级专业ID
			var classMajor = $('#classMajor option:selected').text();          //班级专业名称
			var classesId    = $('#classes option:selected').val();            //具体班级ID
			var classes    = $('#classes option:selected').text();             //具体班级名称
			$.ajax({
				type: "post",
				async: false,
				url: "http://192.168.0.147:8088/student/enter",
				xhrFields: {withCredentials: true}, 
				data:{
		        	stuname:stuname, 
		        	sex:sex,
		        	sfzh:sfzh,
		        	nation:nation,
	        		sfzaddress:address,
		        	phone:phone,
		        	carnumber:carnumber,
		        	emergency:emergency,
		        	//专业分类ID
		        	cateid:classCategoryId,
		        	//专业分类名称
		        	catename:classCategory,
		        	//专业ID
		        	majorid:classMajorId,
		        	//专业名称
		        	majorname:classMajor,
		        	//班级ID
		        	classid:classesId,
		        	//班级名称
		        	classname:classes,
		        },
		        success:function(data){
		        	layui.use('layer', function(){
						var layer = layui.layer;
						layer.msg('新增成功');
						});
						setTimeout(function(){
							window.location="yhgl_xsgl.html";
						},800)	
		        },
//				success: function(data){			
//					if(data.code==1){
//						layui.use('layer', function(){
//						var layer = layui.layer;
//						layer.msg('新增成功');
//						});
//						setTimeout(function(){
//							window.location="yhgl_lsgl.html";
//						},800)	
//					}else{
//						layui.use('layer', function(){
//						var layer = layui.layer;
//						layer.msg('该教师已存在！');
//						});
//					}										
//				},
				error: function(){
					layui.use('layer', function(){
						var layer = layui.layer;
						layer.msg('请求失败');
					});
				}
			});
		});
	}); 
		
	</script>

</body>
</html>