	layui.use(['layer', 'form'], function (){
            var form = layui.form;    
		//自定义验证规则  
		  form.verify({  
		        name: function(value){  
		          if(value.length < 2){  
		            return '请输入至少2位的用户名';  
		          }  
		        }, 
		        phone: [/^1[3|4|5|7|8]\d{9}$/, '手机必须11位，只能是数字！']   
		 	 }); 
		 });
		
		//手机号输入框失去焦点时判断手机号是否正确
		$("input[name='phone']").blur(function(){
			var phoneNew =$("input[name='phone']").val();
			var myreg=/^[1][3,4,5,7,8,9][0-9]{9}$/;
            if (myreg.test(phoneNew)){
                console.log("手机号码填写正确")
            } else {
                layui.use('layer', function(){ 
				var layer = layui.layer;
					layer.msg('手机号输入错误');
				});
			}
		});
		
		//保存新增教师
		$('#addBtn').click(function(){
			var tname      = $('#personName').val();
			var sex        = $('#gender').val();
			var sfzh       = $('#certNumber').val();
			var nation     = $('#nation').val();
			var address    = $('#address').val();
			var phone      = $('#phone').val();
			var workUnit   = $('#workUnit').val();
			var birthdate  = $('#birthday').val();	
			var classCategoryId =  $('#classCategory option:selected').val();
			var classCategory =  $('#classCategory option:selected').text();
			var classMajorId = $('#classMajor option:selected').val();
			var classMajor = $('#classMajor option:selected').text();
			var classesId    = $('#classes option:selected').val();
			var classes    = $('#classes option:selected').text();
			if(tname!=''&&sex!=''&&sfzh!=''&&nation!=''&&address!=''&&phone!=''&&workUnit!=''&&birthdate!=''){
				$.ajax({
				type: "post",
				async: false,
				url: "api/teacher/enter",
				data:{
		        	tname:tname,
		        	sex:sex,
		        	sfzh:sfzh,
		        	nation:nation,
	        		sfzaddress:address,
		        	phone:phone,
		        	workunit:workUnit,
		        	birthdate:birthdate
		        	//专业分类ID
		        	,cateId:classCategoryId
//		        	//专业分类名称
		        	,cateName:classCategory
//		        	//专业ID
		        	,majorid:classMajorId
//		        	//专业名称
		        	,majorname:classMajor
//		        	//班级ID
//		        	classid:classesId,
//		        	//班级名称
//		        	classname:classes,
		        },
				success: function(data){			
					if(data.code==1){
						layui.use('layer', function(){
						var layer = layui.layer;
						layer.msg('新增成功');
						});
						setTimeout(function(){
							window.location="yhgl_lsgl.html";
						},800)	
					}else{
						layui.use('layer', function(){
						var layer = layui.layer;
						layer.msg('该教师已存在！');
						});
					}										
				},
				error: function(error) {
	                layui.use('layer', function () {
	                    var layer = layui.layer;
	                    layer.msg(error.responseText);
	                });
				}
			});
		}else if(classCategory=='请选择' || classMajor=='请选择' ){
                layui.use('layer', function(){
                    var layer = layui.layer;
                    layer.msg('请将内容填写完整!');
                });
		}else{
			layui.use('layer', function(){
				var layer = layui.layer;
				layer.msg('所有信息不能为空!');
			});
		}
			
	});
      