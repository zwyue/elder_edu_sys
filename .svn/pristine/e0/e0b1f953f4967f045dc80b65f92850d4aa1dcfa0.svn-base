package com.zrtjoa.controller;

import com.zrtjoa.common.BaseController;
import com.zrtjoa.entity.Term;
import com.zrtjoa.service.TermService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import javax.servlet.http.HttpSession;

/**
 * TermController class
 * 学期管理
 *
 * @author zwy
 * @date 2018/11/29 14:46
 */
@Controller
@RequestMapping("term")
public class TermController extends BaseController {

    private static final Logger logger = LoggerFactory.getLogger(TermController.class);

    @Autowired
    private TermService termService ;

    @RequestMapping(value = "toTermPage",method = RequestMethod.GET)
    public String toTermPage(){
        logger.info("........进入学期管理页面........");
        return "/term/term_manage" ;
    }

    /**
     * 创建新学期，复制学期
     *
     * @author zwy
     * @date 2018/11/29 15:56
     */
    @RequestMapping(value = "createNewTerm",method = RequestMethod.POST)
    public String createNewTerm(HttpSession httpSession , Term term){
        logger.info("........创建新学期.......");
        term.setUserid(getLoginUser(httpSession).getId());
        term.setUsername(getLoginUser(httpSession).getTname());
        termService.createNewTerm(term);
        return "/term/term_manage" ;
    }
}
